# AI Assistant Instructions for dts-bundler

## Critical Rule: Test Expectations Are Immutable

Files in `test/fixtures/*/expected.d.ts` define the specification.
NEVER modify these files to make tests pass.
Fix implementation code in `src/` instead.

## Validation Checklist

After any implementation, verify:

- [ ] `pnpm test` passes (no regressions)
- [ ] `pnpm lint` passes (code style)
- [ ] `pnpm check-types` passes (TypeScript safety)
- [ ] No `expected.d.ts` files were modified

## When Test Fails

1. Debug the implementation in `src/`
2. Check TypeScript AST handling
3. Verify type transformations
4. Fix the code, not the test

## Exception: Invalid Expected Output

Only if the expected output has:

- Invalid TypeScript syntax
- Violations of `.d.ts` file rules
- Compiler errors

Then:

1. STOP and explain the issue
2. Provide evidence (TS docs, compiler behavior)
3. Wait for human confirmation

## Reference Code

The `dts-bundle-generator/` folder is for reference only.
NEVER modify files in this folder.

See `.github/copilot-instructions.md` for complete guidelines.
